<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DIRECT SUSTENANCE PORTAL</title>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link href="src/css/style.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  <style>
    
  </style>
</head>
<body>
  <body>
  <!-- Add these two lines -->
  <div class="donation-grid"></div>
  <div id="donation-canvas"></div>
  <!-- Three.js will render here -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="src/js/app.js"></script>
  <div id="portal-container">
   
    <!-- Your JS file -->
    <canvas id="c"></canvas>
    <div id="content">
      <div>
    <!-- img test <img
            class="gitch-effect"
            src="https://cdn.glitch.global/df5d1079-eeba-4fba-9538-4a7bb5666149/bridgeicon.png?v=1745224526832"
          /> -->  
      </div>
    </div>
  <div id="portal-container">
    <!-- Cosmic Particle Background -->
    <div id="donation-canvas"></div>

    <!-- Header -->
    <header class="donation-header">
      <h1>DIRECT_<span style="color: var(--electric-teal)">SUSTENANCE</span></h1>
      <h2>NO MIDDLEMAN • NO ALGORITHM</h2>
    </header>

    <!-- Main Content -->
    <main class="donation-content">
      <div class="impact-statement">
        <p>Your contributions flow directly into:</p>
        <em>Mutual aid requests fulfilled • Shadow Spells printed • Files decrypted</em>
      </div>

      <!-- Donation Tiers -->
      <div class="tier-container">
        <!-- Tier 1 -->
        <div class="donation-tier" data-amount="25">
          <div class="tier-header">
            <h3>NETWORK NODE</h3>
            <div class="tier-amount">$25</div>
            <div class="tier-impact">Feeds one person for a week</div>
          </div>
          <ul class="tier-benefits">
            <li>Name in the Manual's honor roll</li>
            <li>Digital survival toolkit</li>
            <li>Early access to drops</li>
          </ul>
          <button class="donate-btn" onclick="window.open('https://square.link/u/roanw4Cj', '_blank')">WEAVE</button>
        </div>

        <!-- Tier 2 -->
        <div class="donation-tier" data-amount="100">
          <div class="tier-header">
            <h3>BRIDGE BUILDER</h3>
            <div class="tier-amount">$100</div>
            <div class="tier-impact">Prints 20 free Shadow Spells zines</div>
          </div>
          <ul class="tier-benefits">
            <li>All previous benefits</li>
            <li>Exclusive strategy briefs</li>
            <li>Monthly developer notes</li>
            <li>Priority Network access</li>
          </ul>
          <button class="donate-btn" onclick="window.open('https://square.link/u/jixoZDkR','_blank')">REPAIR</button>
        </div>

        <!-- Tier 3 -->
        <div class="donation-tier" data-amount="500">
          <div class="tier-header">
            <h3>POWER SOURCE</h3>
            <div class="tier-amount">$500</div>
            <div class="tier-impact">Funds a full Files investigation</div>
          </div>
          <ul class="tier-benefits">
            <li>All previous benefits</li>
            <li>1:1 resistance strategy session</li>
            <li>Physical care package</li>
            <li>Beta test new systems</li>
          </ul>
          <button class="donate-btn" onclick="window.open('https://square.link/u/1K40dFvE','_blank')">EMPOWER</button>
        </div>
      </div>

      <!-- Custom Amount -->
      <div class="custom-amount">
        <h3>CUSTOM FLOW</h3>
        <p>Set your own sustenance level</p>
        <input type="number" min="1" placeholder="$ AMOUNT">
        <button class="donate-btn" onclick="window.open('https://square.link/u/wcpmF4e7', '_blank')">TRANSMIT</button>
      </div>

      <div style="text-align: center; margin-top: 3rem; padding-top: 1rem;">
        <small style="color: var(--electric-teal)">
          Every dollar bypasses platforms—flowing straight to the work.
        </small>
      </div>
    </main>

    <!-- Footer -->
    <footer class="donation-footer">
      <p>Need armor instead? <a href="https://the-reframe.square.site/">The ReFrame Store</a> outfits your resistance.</p>
    </footer>
  </div>

  <script>
    // =====================
    // COSMIC PARTICLE SYSTEM
    // =====================
    new p5((p) => {
      let particles = [];
      const particleCount = 60;

      p.setup = () => {
        const canvas = p.createCanvas(
          document.getElementById('donation-canvas').offsetWidth,
          document.getElementById('donation-canvas').offsetHeight
        );
        canvas.parent('donation-canvas');
        
        // Create cosmic particles
        for (let i = 0; i < particleCount; i++) {
          particles.push({
            x: p.random(p.width),
            y: p.random(p.height),
            size: p.random(1, 4),
            speed: p.random(0.2, 1),
            angle: p.random(p.TWO_PI),
            color: p.random() > 0.7 
              ? p.color(255, 79, 135, 150) // Magenta
              : p.color(0, 245, 212, 180), // Teal
            orbitRadius: p.random(50, 200),
            orbitCenter: {
              x: p.random(p.width),
              y: p.random(p.height)
            }
          });
        }
      };

      p.draw = () => {
        p.clear();
        p.background(26, 26, 46, 15);
        
        particles.forEach(part => {
          part.angle += 0.005 * part.speed;
          part.x = part.orbitCenter.x + p.cos(part.angle) * part.orbitRadius;
          part.y = part.orbitCenter.y + p.sin(part.angle * 0.7) * part.orbitRadius;
          
          part.orbitCenter.x += p.random(-0.3, 0.3);
          part.orbitCenter.y += p.random(-0.3, 0.3);
          part.orbitCenter.x = p.constrain(part.orbitCenter.x, 0, p.width);
          part.orbitCenter.y = p.constrain(part.orbitCenter.y, 0, p.height);
          
          const pulseSize = part.size * (0.8 + 0.4 * p.sin(p.frameCount * 0.03 + part.x));
          
          p.fill(part.color);
          p.noStroke();
          p.drawingContext.shadowBlur = 15;
          p.drawingContext.shadowColor = p.color(
            p.red(part.color),
            p.green(part.color),
            p.blue(part.color),
            150
          );
          p.ellipse(part.x, part.y, pulseSize, pulseSize);
          p.drawingContext.shadowBlur = 0;
        });

        // Hover effects
        const hoveredTier = document.querySelector('.donation-tier:hover');
        if (hoveredTier) {
          const tierRect = hoveredTier.getBoundingClientRect();
          const tierCenter = {
            x: tierRect.left + tierRect.width/2 - p.windowWidth/2 + p.width/2,
            y: tierRect.top + tierRect.height/2
          };
          
          for (let i = 0; i < 3; i++) {
            p.fill(255, 79, 135, 50 + i * 20);
            p.noStroke();
            p.circle(
              tierCenter.x,
              tierCenter.y,
              p.sin(p.frameCount * 0.1 + i) * 50 + 100
            );
          }
          
          particles.forEach(part => {
            const dx = tierCenter.x - part.x;
            const dy = tierCenter.y - part.y;
            const dist = p.sqrt(dx * dx + dy * dy);
            if (dist < 300) {
              part.x += dx * 0.01;
              part.y += dy * 0.01;
            }
          });
        }
      };

      p.windowResized = () => {
        p.resizeCanvas(
          document.getElementById('donation-canvas').offsetWidth,
          document.getElementById('donation-canvas').offsetHeight
        );
      };
    });

    // =====================
    // INTERACTIVITY
    // =====================
    document.addEventListener('DOMContentLoaded', () => {
      // Tier selection feedback
      const tiers = document.querySelectorAll('.donation-tier');
      tiers.forEach(tier => {
        tier.addEventListener('click', function() {
          tiers.forEach(t => t.style.boxShadow = 'none');
          this.style.boxShadow = '0 0 25px var(--hot-magenta)';
        });
      });

      // Console message
      console.log(
        `%cDIRECT SUSTENANCE%c\n\nYour contributions bypass:\n` +
        `- Platform fees\n- Corporate payment processors\n` +
        `- All middlemen\n\nFlow straight to the work.`,
        'color: var(--hot-magenta); font-size: 2rem;',
        'color: var(--electric-teal);'
      );
    });
  </script>
</body>
</html>